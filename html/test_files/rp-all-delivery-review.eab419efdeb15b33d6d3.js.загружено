(window.webpackJsonp=window.webpackJsonp||[]).push([[276],{"2666a0":function(e,t,r){"use strict";var n=r("db8e25");r.n(n).a},"28873f":function(e,t,r){"use strict";var n=r("f2302a");r.n(n).a},"288faa":function(e,t,r){},"2acdf1":function(e,t,r){"use strict";var n=r("fb30cc");r.n(n).a},"38b852":function(e,t,r){"use strict";var n=r("fa5b9f");r.n(n).a},"3ddb24":function(e,t,r){},567524:function(e,t,r){"use strict";r.r(t);r("1c750e"),r("41d819"),r("cb1771"),r("c08bb9"),r("aae158"),r("12a106"),r("2c09af");var n=r("dc77a5"),o=r("5eabea"),c=r("ff287e"),l=r.n(c),d=r("487109"),h=r("23c58b"),v=r("df2fe1"),f=(r("340dbd"),r("226eb3")),m=r("e4591c"),y=r("0c80ec"),_={components:{Price:m.a},props:{info:{type:Object,required:!0}},computed:{formattedDate:function(){var e=this.info.date;return y.e(new Date(e),!0,y.b.GENITIVE)},priceFontSize:function(){return this.isMobile?16:21}}},w=(r("38b852"),r("b429cb")),O=Object(w.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.info?r("div",{staticClass:"header"},[r("div",{staticClass:"number"},[e._v("\n    Доставка № "+e._s(e.info.shipmentId)+"\n  ")]),e._v(" "),e.info.date?r("div",{staticClass:"date"},[e._v("\n    "+e._s(e.formattedDate)+"\n  ")]):e._e(),e._v(" "),e.info.price?r("Price",{staticClass:"price",attrs:{price:e.info.price,size:e.priceFontSize}}):e._e()],1):e._e()}),[],!1,null,"178c9bf3",null).exports,R=(r("393231"),{props:{value:{type:Array,required:!0},items:{type:Array,required:!0},interactive:{type:Boolean,default:!0}},data:function(){return{focusId:null,data:this.value||[]}},computed:{isVisible:function(){return this.items&&this.items.length}},methods:{onChange:function(){this.$emit("input",this.data)},isItemSelected:function(e){return this.data.find((function(t){return e.id===t.id}))}}}),E=(r("d1f5cf"),Object(w.a)(R,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isVisible?r("div",{staticClass:"answers-list"},e._l(e.items,(function(t){return r("label",{key:t.id,class:["answer",{disabled:!e.interactive,selected:e.isItemSelected(t),focused:t.id===e.focusId}]},[e._v("\n    "+e._s(t.text)+"\n    "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input",attrs:{disabled:!e.interactive,type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.data)?e._i(e.data,t)>-1:e.data},on:{blur:function(t){e.focusId=null},change:[function(r){var n=e.data,o=r.target,c=!!o.checked;if(Array.isArray(n)){var l=t,d=e._i(n,l);o.checked?d<0&&(e.data=n.concat([l])):d>-1&&(e.data=n.slice(0,d).concat(n.slice(d+1)))}else e.data=c},e.onChange],focus:function(r){e.focusId=t.id}}})])})),0):e._e()}),[],!1,null,"34670ca4",null).exports),x=r("7e3475"),I=r("c0bc28"),C=r("e8c29f"),P=r("c9429f"),k=r("b902cb"),D={components:{CDNImage:r("05da3f").a},props:{readOnly:{type:Boolean,default:!0},images:{type:Array,required:!0}},computed:{isVisible:function(){return this.images.length}},methods:{onRemove:function(e){this.$emit("remove",e)}}},$=(r("87b806"),Object(w.a)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isVisible?r("div",{staticClass:"images-container"},e._l(e.images,(function(image,t){return r("div",{key:t,staticClass:"image-container"},[r("figure",{staticClass:"image-wrap"},[e.readOnly?e._e():r("button",{staticClass:"reset-button remove",on:{click:function(r){return e.onRemove(t)}}}),e._v(" "),e.readOnly?r("CDNImage",{staticClass:"image image-cdn",attrs:{src:image}}):r("img",{staticClass:"image",attrs:{src:image}})],1)])})),0):e._e()}),[],!1,null,"4cfda680",null).exports),j=r("5bedd2"),L=r("b66b3d"),S=r("34271c"),A=r("9e82e9"),T=r("6876d5");function V(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?V(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):V(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var H,M,U,N,z,F={components:{DeliveryReviewHeader:O,DragAndDrop:L.a,AnswersList:E,ResizeTextarea:x.a,Button:k.b,TransitionFade:I.a,UploadButton:C.a,Rating:P.a,Photos:$,Processing:j.a},props:{deliveryInfo:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data:function(){return{DELIVERY_LABELS:S.a,rating:null,uploadedPhotos:[],loadedPhotos:[],availableAnswers:[],errorsUpload:"",serverError:null,comment:"",answers:[],loading:!0,creating:!1,created:!1}},computed:B({shipmentId:function(){return this.deliveryInfo&&this.deliveryInfo.shipmentId},isDragAndDropInteractive:function(){return!this.readOnly&&Boolean(this.rating)&&!this.created},rating5:function(){return 5===this.rating&&null!==this.rating},ratingLessThan5:function(){return this.rating<5&&null!==this.rating},photos:function(){return this.readOnly?this.loadedPhotos.map((function(e){return e.url})):this.uploadedPhotos.map((function(e){return e.dataURL}))},answerIds:function(){return this.answers.map((function(e){return e.id}))},textAreaSizes:function(){return{min:this.isMobile?20:170,max:this.isMobile?150:200}},isVisible:function(){return this.shipmentId},isHideRatingLabel:function(){return!this.rating},isTextAreaVisible:function(){return!this.readOnly||this.readOnly&&this.comment}},Object(T.e)("reviews",{deliveryReview:"deliveryReview"})),mounted:function(){this.initialMethods()},methods:B({},Object(T.b)("reviews",{resolveReview:"DELIVERY_RESOLVE_REVIEW"}),{setUploadError:function(e){this.errorsUpload=e},onClickSubmit:function(){this.readOnly?this.resolveReview(this.deliveryReview.isCreated||this.deliveryReview.isReadOnly):this.createReview()},clientFileUpload:(z=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorsUpload="",e.next=3,this.$store.dispatch("reviews/CLIENT_UPLOAD_PHOTOS",{newPhotos:t,uploadedPhotos:this.uploadedPhotos});case 3:(r=e.sent).error&&this.setUploadError(r.error),this.uploadedPhotos=[].concat(Object(f.a)(this.uploadedPhotos),Object(f.a)(r.data));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return z.apply(this,arguments)}),removeImage:function(e){this.uploadedPhotos.splice(e,1),this.errorsUpload=""},initialMethods:(N=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=[],this.deliveryInfo.availableAnswers?this.availableAnswers=this.deliveryInfo.availableAnswers:t.push(this.loadInfo()),this.readOnly&&(this.rating=null,this.comment=null,this.loadedPhotos=[],this.answers=[],t.push(this.loadReview())),e.next=6,Promise.all(t);case 6:this.loading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)}),loadReview:(U=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.deliveryReview.getReviewByShipmentId.get(this.shipmentId);case 3:t=e.sent,r=t.review,this.rating=r.rating,this.comment=r.comment,this.loadedPhotos=r.photos,this.answers=r.answers,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return U.apply(this,arguments)}),loadInfo:(M=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.deliveryReview.getInfoByShipmentId.get(this.shipmentId);case 3:t=e.sent,r=t.shipment.availableAnswers,this.availableAnswers=r||[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.$logger.error({exception:e.t0,message:A.g.ERROR_LOAD_REVIEW_INFO});case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return M.apply(this,arguments)}),createReview:(H=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.creating){e.next=2;break}return e.abrupt("return");case 2:if(this.rating){e.next=4;break}return e.abrupt("return");case 4:return this.creating=!0,e.prev=5,e.next=8,this.$store.dispatch("reviews/SERVER_UPLOAD_DELIVERY_PHOTOS",this.uploadedPhotos);case 8:t=e.sent,e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(5),this.setUploadError("Произошла ошибка при загрузке фотографий, попробуйте снова."),this.$logger.error({exception:e.t0,message:A.g.ERROR_UPLOAD_PHOTOS}),this.creating=!1,e.abrupt("return");case 17:return r={comment:this.comment,photos:t,answerIds:this.rating<5?this.answerIds:[],shipmentId:this.shipmentId,rating:this.rating},e.prev=18,e.next=21,this.$store.dispatch("reviews/CREATE_DELIVERY_REVIEW",{data:r,photos:this.uploadedPhotos});case 21:this.created=!0,this.scrollToTop(),this.$store.commit("reviews/deliveryReviewIsCreated",this.created),e.next=32;break;case 26:return e.prev=26,e.t1=e.catch(18),this.serverError="Произошла ошибка при создании отзыва, попробуйте снова.",this.$logger.error({exception:e.t1,message:A.g.ERROR_CREATE_REVIEW}),this.creating=!1,e.abrupt("return");case 32:this.creating=!1;case 33:case"end":return e.stop()}}),e,this,[[5,11],[18,26]])}))),function(){return H.apply(this,arguments)}),scrollToTop:function(){var e=document.querySelector(".delivery-review-popup"),t=e&&e.querySelector(".modal-container");t&&(t.scrollTop=0)}})},W=(r("c52223"),Object(w.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isVisible?r("div",{class:["delivery-review",{created:e.created}]},[r("button",{staticClass:"reset-button close-popup",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}}),e._v(" "),r("DragAndDrop",{attrs:{interactive:e.isDragAndDropInteractive},on:{drop:e.clientFileUpload,error:e.setUploadError}},[r("DeliveryReviewHeader",{attrs:{info:e.deliveryInfo}}),e._v(" "),e.isMobile?e._e():r("div",{staticClass:"top-background"}),e._v(" "),r("div",{staticClass:"background"}),e._v(" "),e.isMobile?e._e():r("div",{staticClass:"bottom-background"}),e._v(" "),e.isMobile?r("div",{staticClass:"mobile-background mobile-background_1"}):e._e(),e._v(" "),e.isMobile?r("div",{staticClass:"mobile-background mobile-background_2"}):e._e(),e._v(" "),e.isMobile?r("div",{staticClass:"mobile-background mobile-background_3"}):e._e(),e._v(" "),e.isMobile?r("div",{staticClass:"mobile-background mobile-background_4"}):e._e(),e._v(" "),e.isMobile?r("div",{staticClass:"mobile-background mobile-background_5"}):e._e(),e._v(" "),r("div",{class:["delivery-review-content"]},[r("div",{staticClass:"animation-circle"}),e._v(" "),r("div",{staticClass:"success"},[r("div",{staticClass:"success-message"},[e._v("\n            Спасибо за отзыв\n          ")]),e._v(" "),r("Button",{staticClass:"success-button",attrs:{color:"cream",type:"button"},on:{click:function(t){return e.resolveReview(e.deliveryReview.isCreated)}}},[e._v("\n            Закрыть\n          ")])],1),e._v(" "),e.loading?e._e():r("div",{staticClass:"delivery-review-content-top"},[r("div",{staticClass:"raiting-placeholder"}),e._v(" "),r("div",{class:["title","title-rating"]},[r("TransitionFade",[null===e.rating?r("span",[e._v("\n                Оцените доставку\n              ")]):5===e.rating?r("span",[e._v("\n                Отлично!\n              ")]):e.rating<5?r("span",[e._v("\n\t\t\t\t\t\t\t\t \n              ")]):e._e()])],1),e._v(" "),r("div",{class:["raiting-wrapper",{"rating-with-questions":e.ratingLessThan5,"rating-without-questions":e.rating5}]},[r("Rating",{attrs:{"hide-label":e.isHideRatingLabel,"hide-title":!0,labels:e.DELIVERY_LABELS,"read-only":e.readOnly,name:"deliveryReview"},model:{value:e.rating,callback:function(t){e.rating=e._n(t)},expression:"rating"}})],1),e._v(" "),r("TransitionFade",[e.ratingLessThan5?r("div",{class:["answers-list-wrapper"]},[r("div",{class:["title","title-answers"]},[e._v("\n                Что можно улучшить?\n              ")]),e._v(" "),r("AnswersList",{attrs:{interactive:!e.readOnly,items:e.availableAnswers},model:{value:e.answers,callback:function(t){e.answers=t},expression:"answers"}})],1):e._e()])],1),e._v(" "),e.loading?e._e():r("TransitionFade",[e.rating?r("div",{staticClass:"delivery-review-content-bottom"},[e.isTextAreaVisible?r("ResizeTextarea",{staticClass:"textarea",attrs:{autosize:!!e.readOnly,"max-height":e.textAreaSizes.max,"min-height":e.textAreaSizes.min,"read-only":e.readOnly,value:e.comment,placeholder:"Расскажите о доставке"},on:{input:function(t){e.comment=t.target.value}}}):e._e(),e._v(" "),e.readOnly?e._e():r("UploadButton",{staticClass:"upload",attrs:{error:e.errorsUpload},on:{upload:e.clientFileUpload}}),e._v(" "),r("Photos",{staticClass:"photos-wrapper",attrs:{images:e.photos,"read-only":e.readOnly},on:{remove:e.removeImage}}),e._v(" "),e.serverError?r("div",{staticClass:"server-error"},[e._v("\n              "+e._s(e.serverError)+"\n            ")]):e._e(),e._v(" "),r("Button",{staticClass:"submit-button",attrs:{color:"blue"},on:{click:function(t){return e.onClickSubmit()}}},[e._v("\n              "+e._s(e.readOnly?"Закрыть":"Отправить отзыв")+"\n            ")])],1):e._e()]),e._v(" "),e.creating||e.loading?r("Processing"):e._e()],1)],1)],1):e._e()}),[],!1,null,"4297d602",null).exports),Y=r("8fe135");function Q(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var J,G,K=d.a.extend({name:"DeliveryReviewWidget",components:{DeliveryReview:W,Portal:h.a,OzonModal:v.a},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Q(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Q(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(T.e)("reviews",{deliveryReview:"deliveryReview"}),{},Object(T.e)("userInfo",{user:"user"}),{shipmentIdFromLocation:function(){return this.$composerRouter.getParams().query[Y.a]},isLoggedIn:function(){return l()(this,"user.isLoggedIn")||!1}}),watch:{isLoggedIn:function(e){var t=this;e&&this.shipmentIdFromLocation&&this.$nextTick((function(){t.openPopup()}))}},mounted:(G=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isLoggedIn&&this.shipmentIdFromLocation&&this.openPopup();case 1:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)}),methods:{onModalClick:function(e){var t=e.target;t&&t.classList.contains("modal-container")&&this.onClose()},onClose:function(){this.$store.dispatch("reviews/DELIVERY_RESOLVE_REVIEW",this.deliveryReview.isCreated||this.deliveryReview.isReadOnly)},getPathWithoutQueryParam:function(param){var e=this.$composerRouter.getParams(),t=e.query,path=e.path;return t[param]&&delete t[param],Object.keys(t).reduce((function(e,r,n){return"".concat(e).concat(n>0?"&":"?").concat(r,"=").concat(t[r])}),path)},removeQueryParam:function(){var e=this.getPathWithoutQueryParam(Y.a);this.$composerRouter.replace(e,{silent:!0})},openPopup:(J=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.deliveryReview.getInfoByShipmentId.get(this.shipmentIdFromLocation);case 3:if(t=e.sent,r=t.shipment,n=r.availableAnswers,o=r.amount,c=r.createdAt,l=r.reviewId,r.canWriteReview||l){e.next=13;break}return this.removeQueryParam(),e.abrupt("return");case 13:return e.next=15,this.$store.dispatch(Y.c,{readOnly:Boolean(l),info:{shipmentId:this.shipmentIdFromLocation,price:o,date:c,availableAnswers:n}});case 15:d=e.sent,this.removeQueryParam(),d&&this.$store.dispatch(Y.b,{shipmentId:this.shipmentIdFromLocation}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),this.$logger.error({exception:e.t0,message:A.g.ERROR_LOAD_REVIEW_INFO});case 23:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return J.apply(this,arguments)})}}),X=(r("2acdf1"),Object(w.a)(K,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.deliveryReview.modal?r("Portal",{attrs:{name:"delivery-review"}},[e.deliveryReview.modal?r("OzonModal",{class:["delivery-review-popup",{mobile:e.isMobile}],attrs:{"is-close-button-visible":!1,"scrolling-window":!0,"background-color":"gray"},on:{close:e.onClose},nativeOn:{click:function(t){return e.onModalClick(t)}}},[r("DeliveryReview",{attrs:{"delivery-info":e.deliveryReview.info,"read-only":e.deliveryReview.isReadOnly},on:{close:e.onClose}})],1):e._e()],1):e._e()}),[],!1,null,"fe775ae8",null));t.default=X.exports},"5bedd2":function(e,t,r){"use strict";var n={components:{Preloader:r("e4cd70").a}},o=(r("fd796b"),r("b429cb")),component=Object(o.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"creating"},[t("Preloader")],1)}),[],!1,null,"9a62a45e",null);t.a=component.exports},"6adb1c":function(e,t,r){},714654:function(e,t,r){},"7e3475":function(e,t,r){"use strict";r("497371");var n={props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},maxLength:{type:Number,default:void 0},autosize:{type:Boolean,default:!0},minHeight:{type:[String,Number],default:"auto"},maxHeight:{type:[String,Number],default:"auto"},readOnly:{type:Boolean,default:!1}},data:function(){return{val:null,scrollHeight:"auto"}},computed:{style:function(){return{minHeight:"number"==typeof this.minHeight?"".concat(this.minHeight,"px"):this.minHeight,maxHeight:"number"==typeof this.maxHeight?"".concat(this.maxHeight,"px"):this.maxHeight,"overflow-y":"auto"}}},watch:{value:function(){this.updateVal(),this.updateHeight()}},created:function(){this.updateVal()},mounted:function(){this.autosize&&this.updateHeight()},methods:{onInput:function(e){this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px"),this.$emit("input",e)},updateVal:function(){this.val=this.value},focus:function(){this.$el&&"function"==typeof this.$el.focus&&this.$el.focus()},updateHeight:function(){var e=this;this.$nextTick((function(){e.$el&&(e.$el.style.height="".concat(e.$el.scrollHeight,"px"))}))}}},o=r("b429cb"),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],style:e.style,attrs:{maxlength:e.maxLength,placeholder:e.placeholder,readonly:e.readOnly},domProps:{value:e.val},on:{input:[function(t){t.target.composing||(e.val=t.target.value)},e.onInput]}})}),[],!1,null,null,null);t.a=component.exports},"87b806":function(e,t,r){"use strict";var n=r("a03578");r.n(n).a},"8fe135":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c}));var n="reviews/OPEN_DELIVERY_REVIEW_POPUP",o="reviews/DELIVERY_REVIEW_SUCCESS_CREATED",c="drsi"},"9375b2":function(e,t,r){"use strict";r("497371");var n={props:{size:{type:String,default:"default"},theme:{type:String,default:"default"},value:{type:Number,default:0},name:{type:String,required:!0},errorMessage:{type:String,default:""},error:{type:Boolean,default:!1},max:{type:Number,default:5},readOnly:{type:Boolean,default:!1}},data:function(){return{rating:this.value||0}},watch:{rating:function(e){this.$emit("input",e)},value:function(e){this.rating=e}}},o=(r("ec55c7"),r("b429cb")),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["set-rating",e.size,e.theme,{readonly:e.readOnly}]},[e._l(e.max,(function(t){return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.rating,expression:"rating"}],key:"input-"+t,attrs:{id:e.name+"-"+(e.max-t+1),disabled:e.readOnly,name:e.name,type:"radio"},domProps:{value:e.max-t+1,checked:e._q(e.rating,e.max-t+1)},on:{keydown:function(e){e.stopPropagation()},change:function(r){e.rating=e.max-t+1}}}),e._v(" "),r("label",{key:"label-"+t,attrs:{"data-test-id":"ratingReviewStar-"+(e.max-t+1),for:e.name+"-"+(e.max-t+1)}},[e._v("\n      "+e._s(e.max-t+1)+"\n    ")])]})),e._v(" "),e.readOnly?r("div",{staticClass:"readonly-placeholder"}):e._e(),e._v(" "),e.error?r("div",{staticClass:"error"},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e()],2)}),[],!1,null,"759bc45c",null);t.a=component.exports},a03578:function(e,t,r){},b66b3d:function(e,t,r){"use strict";r("340dbd"),r("0a5193");var n=r("c7aace"),o={props:{message:{type:String,default:"Отпустите, чтобы загрузить фотографии"},interactive:{type:Boolean,default:!0}},data:function(){return{isDrag:!1}},mounted:function(){this.$refs.dragEnterArea.addEventListener("dragenter",this.handleDrag,!1),this.$refs.dragLeaveArea.addEventListener("dragleave",this.handleDrag,!1)},methods:{handleDrag:function(e){this.interactive&&("dragenter"===e.type&&(this.isDrag=!0),"dragleave"===e.type&&(this.isDrag=!1))},onDrop:function(e){if(this.interactive){var t=e.dataTransfer.files||e.target.files,r=Array.from(t).filter((function(e){return"image/jpeg"===e.type||"image/png"===e.type})),o=t.length-r.length;o&&this.$emit("error","".concat(Object(n.m)(o,["файл не загружен","файла не загружено","файлов не загружено"]),", формат файлов должен быть png или jpg")),this.$emit("drop",r),this.isDrag=!1}}},destroy:function(){this.$refs.dragEnterArea.removeEventListener("dragenter",this.handleDrag),this.$refs.dragLeaveArea.removeEventListener("dragleave",this.handleDrag)}},c=(r("2666a0"),r("b429cb")),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"dragEnterArea",staticClass:"drop-area"},[r("div",{ref:"dragLeaveArea",staticClass:"drop-text",class:{active:e.isDrag},on:{dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop(t)}}},[e._v("\n    "+e._s(e.message)+"\n  ")]),e._v(" "),e._t("default")],2)}),[],!1,null,"1f743c98",null);t.a=component.exports},c52223:function(e,t,r){"use strict";var n=r("288faa");r.n(n).a},c9429f:function(e,t,r){"use strict";r("497371");var n=r("9375b2"),o=r("34271c"),c={components:{SetRating:n.a},props:{name:{type:String,required:!0},value:{type:Number,default:0},size:{type:String,default:"normal"},error:{type:Boolean,default:!1},hideTitle:{type:Boolean,default:!1},labels:{type:Array,default:function(){return o.d}},defaultLabel:{type:String,default:"Оцените покупку"},hideLabel:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{rating:this.value}},computed:{hasError:function(){return 0===this.value&&this.error}},watch:{rating:function(e){this.$emit("input",e)},value:function(e){this.rating=e}}},l=(r("d2aa0b"),r("b429cb")),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["rating",e.size,{"with-label":!e.hideLabel}]},[e.hideTitle?e._e():r("h3",{staticClass:"title"},[e._v("\n    Оценка\n  ")]),e._v(" "),r("SetRating",{attrs:{error:e.hasError,name:e.name,"read-only":e.readOnly,"error-message":"Поставьте оценку"},model:{value:e.rating,callback:function(t){e.rating=e._n(t)},expression:"rating"}}),e._v(" "),e.hasError||e.hideLabel?e._e():[e.value>0?r("div",{staticClass:"label"},[e._v("\n      "+e._s(e.labels[e.value-1])+"\n    ")]):r("div",{staticClass:"label label-default"},[e._v("\n      "+e._s(e.defaultLabel)+"\n    ")])]],2)}),[],!1,null,"2d00d7df",null);t.a=component.exports},d1f5cf:function(e,t,r){"use strict";var n=r("714654");r.n(n).a},d2aa0b:function(e,t,r){"use strict";var n=r("6adb1c");r.n(n).a},db8e25:function(e,t,r){},e8c29f:function(e,t,r){"use strict";var n={components:{Button:r("b902cb").b},props:{error:{type:String,default:""},buttonText:{type:String,default:"Загрузите фотографии"},infoText:{type:String,default:"10 фото, jpg, png"}},methods:{filesChange:function(e){this.$emit("upload",e),this.$refs.fileInput.value=""},fakeClick:function(){this.$refs.fileInput.click()}}},o=(r("28873f"),r("b429cb")),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-button-wrap"},[r("div",{staticClass:"upload-button"},[r("div",{staticClass:"button-wrap"},[r("input",{ref:"fileInput",staticClass:"hidden-input",attrs:{accept:".jpg, .jpeg, .png",multiple:"",name:"Photos",type:"file"},on:{change:function(t){return e.filesChange(t.target.files)}}}),e._v(" "),r("Button",{staticClass:"button",attrs:{color:"cream",type:"button"},on:{click:e.fakeClick}},[r("div",{staticClass:"button-icon"}),e._v("\n         "+e._s(e.buttonText)+"\n      ")])],1),e._v(" "),e.isMobile?e._e():r("div",{staticClass:"drag-info"},[e._v("\n      или перетащите в форму\n    ")])]),e._v(" "),e.error?r("div",{staticClass:"upload-info upload-error"},[e._v("\n    "+e._s(e.error)+"\n  ")]):r("div",{staticClass:"upload-info"},[e._v("\n    "+e._s(e.infoText)+"\n  ")])])}),[],!1,null,"09c3bbf8",null);t.a=component.exports},ec55c7:function(e,t,r){"use strict";var n=r("f27167");r.n(n).a},f2302a:function(e,t,r){},f27167:function(e,t,r){},fa5b9f:function(e,t,r){},fb30cc:function(e,t,r){},fd796b:function(e,t,r){"use strict";var n=r("3ddb24");r.n(n).a}}]);