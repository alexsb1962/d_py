(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{"5f5a17":function(t,e,r){"use strict";r.r(e);r("1c750e"),r("41d819"),r("c08bb9"),r("aae158"),r("12a106"),r("2c09af");var n=r("dc77a5"),o=r("5eabea"),c=r("4047f7"),d=r("487109"),l=r("6876d5");function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var m,f,x,v,y,O="https://code.jquery.com/jquery-1.12.4.min.js",w={},C=d.a.extend({name:"CustomHtml",props:{context:{type:String,default:""}},data:function(){return{cartAddContext:null}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(source,!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.e)({cartItemsHash:function(t){return t.cartGlobal.itemsHash}}),{},Object(l.c)({cartUrl:"cartGlobal/cartUrl"}),{isInCart:function(){return Boolean(this.cartItemsHash&&this.cartItemsHash[this.id])},style:function(){return'<style type="text/css">'.concat(this.widgetState.css,"</style>")}}),methods:{addInlineScript:function(content){var t=document.createElement("script");t.textContent="try {".concat(content,"} catch (error) {console.log('Widget custom html error', error)}"),this.$refs.customHtml.appendChild(t)},addToCart:(y=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.detail,this.isInCart){t.next=4;break}return t.next=4,this.$store.dispatch("cartGlobal/UPDATE_ITEMS_IN_CART",{ids:[{id:r,spaceContext:this.context}],method:"post"});case 4:this.$composerRouter.redirect("".concat(this.cartUrl,"/#cartItem=").concat(r));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)}),loadFiles:c.d,addFile:(v=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w[e]){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.loadFiles(e,!0);case 4:w[e]=t.sent;case 5:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)}),loadResources:(x=Object(n.a)(regeneratorRuntime.mark((function t(){var content,e,i,r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:content=this.widgetState,e=Array.isArray(content.resources)?content.resources:[],i=0;case 3:if(!(i<e.length)){t.next=11;break}if(r=e[i],n=r.type,o=r.value,!(["script","style"].indexOf(n)>=0)){t.next=8;break}return t.next=8,this.addFile(o);case 8:i++,t.next=3;break;case 11:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)}),toogleModalLogin:(f=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("modalLogin/TOGGLE_MODAL_LOGIN",!0);case 2:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},mounted:(m=Object(n.a)(regeneratorRuntime.mark((function t(){var content,e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(content=this.widgetState,e=String(content.js),r=content.resources,this.cartAddContext=this.addToCart.bind(this),!e&&!r.length){t.next=9;break}return t.next=7,this.addFile(O);case 7:return t.next=9,this.loadResources();case 9:if(this.$refs.customHtmlContainer.addEventListener("addToCart",this.cartAddContext,!0),this.$refs.customHtmlContainer.addEventListener("toogleModalLogin",this.toogleModalLogin,!0),t.t0=e.length,!t.t0){t.next=15;break}return t.next=15,this.addInlineScript(e);case 15:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),destroyed:function(){this.$refs.customHtmlContainer&&(this.$refs.customHtmlContainer.removeEventListener("addToCart",this.cartAddContext),this.$refs.customHtmlContainer.removeEventListener("toogleModalLogin",this.toogleModalLogin))}}),j=r("b429cb");r.d(e,"JQUERY_CDN",(function(){return O}));var component=Object(j.a)(C,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"qa",rawName:"v-qa:id",value:this.groupStatePath,expression:"groupStatePath",arg:"id"}],ref:"customHtml",staticClass:"custom-html"},[e("div",{domProps:{innerHTML:this._s(this.style)}}),this._v(" "),e("div",{ref:"customHtmlContainer",staticClass:"custom-html__container",domProps:{innerHTML:this._s(this.widgetState.html)}})])}),[],!1,null,null,null);e.default=component.exports}}]);